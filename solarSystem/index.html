<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js Earth Model with Stars and Real Rotation Speed</title>
    <style>
        body {
            background-size: cover;
            margin: 0;
            overflow: hidden;
            color: white;
            font-family: Arial, sans-serif;
        }

        #earth-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        #clock {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 32px;
            text-align: center;
            z-index: 1;
            cursor: pointer;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        #clock:hover {
            color: darkgrey;
        }

        #time-control {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        #time-control label {
            margin-right: 10px;
            display: none;
        }

        #time-control input {
            width: 200px;
        }

        /* Information Box Styles */
        #info-box {
            position: absolute;
            width: 300px;
            height: 600px;
            top: 70px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 2;
            max-width: 300px;
        }

        #info-box h2 {
            margin-top: 0;
        }

        #info-box img {
            width: 100%;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        #info-box button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: red;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        #moon-info-box {
            position: absolute;
            width: 300px;
            height: 600px;
            top: 70px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 2;
            max-width: 300px;
        }

        #moon-info-box h2 {
            margin-top: 0;
        }

        #moon-info-box img {
            width: 100%;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        #moon-info-box button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: red;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="earth-container">
        <div id="clock"></div>
        <div id="info-box">
            <button id="close-info">-</button>
            <h2>Earth</h2>
            <img src="https://wallpapercave.com/wp/wp4729516.jpg" alt="Earth Image">
            <p>The Earth is the third planet from the Sun and the only known astronomical object to harbor life.</p>
            <p><strong>Diameter:</strong> 12,742 km</p>
            <p><strong>Orbit Period:</strong> 365.25 days</p>
            <p><strong>Day Length:</strong> 24 hours</p>
        </div>
        <div id="moon-info-box">
            <button id="close-moon-info">-</button>
            <h2>Moon</h2>
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTFVc-J__jhYTAssyy_ZBOetVV39_Eb38XJqQ&s" alt="Moon Image">
            <p>The Moon is Earthâ€™s only natural satellite and the fifth-largest moon in the Solar System.</p>
            <p><strong>Diameter:</strong> 3,474 km</p>
            <p><strong>Orbit Period:</strong> 27.3 days</p>
            <p><strong>Day Length:</strong> 29.5 Earth days</p>
        </div>
    </div>

    <div id="time-control">
        <label for="rotation-speed">Rotation Speed:</label>
        <input type="range" id="rotation-speed" min="0" max="1" step="0.01" value="1">
    </div>

    <!-- Include Three.js and OrbitControls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>

    <script>
        document.getElementById('close-info').addEventListener('click', function() {
            document.getElementById('info-box').style.display = 'none';
        });

        document.getElementById('close-moon-info').addEventListener('click', function() {
            document.getElementById('moon-info-box').style.display = 'none';
        });

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;

        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.getElementById('earth-container').appendChild(renderer.domElement);

        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.enableZoom = true;

        const textureLoader = new THREE.TextureLoader();
        const earthgroup = new THREE.Group();
        scene.add(earthgroup);

        const loader = new THREE.TextureLoader();
        const earthMaterial = new THREE.MeshStandardMaterial({ map: loader.load('textures/earth3.jpg') });
        const earthGeometry = new THREE.SphereGeometry(2, 50, 50);
        const earth = new THREE.Mesh(earthGeometry, earthMaterial);
        earthgroup.add(earth);

        const lightsMat = new THREE.MeshStandardMaterial({
            map: loader.load('textures/earth_nightmap.jpg'),
            blending: THREE.AdditiveBlending,
        });
        const lightsMesh = new THREE.Mesh(earthGeometry, lightsMat);
        earthgroup.add(lightsMesh);

        const cloudMat = new THREE.MeshStandardMaterial({
            map: loader.load('textures/cloudMesh1.png'),
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending,
        });
        const cloudMesh = new THREE.Mesh(earthGeometry, cloudMat);
        cloudMesh.scale.setScalar(1.003);
        earthgroup.add(cloudMesh);

        // Initialize OBJLoader
        const objLoader = new THREE.OBJLoader();
        const mtlLoader = new THREE.MTLLoader();

        // Create 5 satellites with different orbits
        let satellites = [];
        let satelliteOrbitRadii = [3, 4, 5, 6, 7];  // Different orbit radii
        let satelliteOrbitAngles = [0, 0, 0, 0, 0]; // Initialize orbit angles for satellites
        let satelliteOrbitSpeeds = [0.001, 0.0008, 0.0012, 0.0009, 0.0015]; // Different orbit speeds

        mtlLoader.load('textures/Satellite.mtl', function(materials) {
            materials.preload();
            objLoader.setMaterials(materials);

            objLoader.load('textures/Satellite.obj', function(object) {
                for (let i = 0; i < 5; i++) {
                    let satellite = object.clone();
                    satellite.scale.set(0.01, 0.01, 0.01);
                    satellite.position.set(satelliteOrbitRadii[i], 0, 0); // Set initial position based on orbit radius
                    scene.add(satellite);
                    satellites.push(satellite);
                }
            });
        });

        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(10, 10, 10);
        scene.add(directionalLight);

        const starGeometry = new THREE.BufferGeometry();
        const starMaterial = new THREE.PointsMaterial({ color: 0xffffff });
        const starVertices = [];
        for (let i = 0; i < 10000; i++) {
            starVertices.push((Math.random() - 0.5) * 2000);
            starVertices.push((Math.random() - 0.5) * 2000);
            starVertices.push(-Math.random() * 2000);
        }
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const stars = new THREE.Points(starGeometry, starMaterial);
        scene.add(stars);

        let earthRotationSpeed = 0.000072722; // Approximate real rotation speed (radians per frame)
        const clockElement = document.getElementById('clock');

        let timeSpeed = 1;

        clockElement.addEventListener('click', function() {
            timeSpeed = timeSpeed === 1 ? 10 : 1;
        });

        const rotationSpeedControl = document.getElementById('rotation-speed');
        rotationSpeedControl.addEventListener('input', function() {
            earthRotationSpeed = parseFloat(rotationSpeedControl.value);
        });

        function animate() {
            requestAnimationFrame(animate);

            earth.rotation.y += earthRotationSpeed * timeSpeed;

            // Update satellites' positions
            for (let i = 0; i < satellites.length; i++) {
                satelliteOrbitAngles[i] += satelliteOrbitSpeeds[i];
                let x = satelliteOrbitRadii[i] * Math.cos(satelliteOrbitAngles[i]);
                let z = satelliteOrbitRadii[i] * Math.sin(satelliteOrbitAngles[i]);
                satellites[i].position.set(x, 0, z);
            }

            controls.update();
            renderer.render(scene, camera);
        }

        animate();
    </script>
</body>
</html>
